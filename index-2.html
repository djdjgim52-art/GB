<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>가위바위보 터치 게임</title>
  <style>
    html,body{height:100%;margin:0;background:#ffffff;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;box-sizing:border-box}
    .board{display:flex;gap:16px;width:100%;max-width:720px}
    .card{flex:1;aspect-ratio:3/4;border:2px solid #ddd;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;user-select:none;touch-action:manipulation}
    .emj{font-size:96px;margin-bottom:12px}
    .label{font-size:18px;color:#333}
    .controls{margin-top:18px;display:flex;gap:12px}
    button{padding:10px 14px;border-radius:10px;border:1px solid #ccc;background:#fafafa;font-size:16px}
    .result{margin-top:18px;font-size:20px;color:#111}
    @media(max-width:420px){.emj{font-size:64px}.card{aspect-ratio:2/3}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="board">
      <div class="card" id="left" role="button" tabindex="0" aria-label="왼쪽 플레이어">
        <div class="emj" id="left-emoji">❔</div>
        <div class="label">왼쪽: 터치해서 시작/정지</div>
      </div>
      <div class="card" id="right" role="button" tabindex="0" aria-label="오른쪽 플레이어">
        <div class="emj" id="right-emoji">❔</div>
        <div class="label">오른쪽: 터치해서 시작/정지</div>
      </div>
    </div>

    <div class="controls">
      <button id="reset">초기화</button>
      <button id="decide">결과 확인</button>
    </div>

    <div class="result" id="result">두 플레이어 모두 멈춘 후 결과를 확인하세요.</div>
  </div>

  <script>
    const ITEMS = [
      {key: 'scissors', emj: '✂️', label: '가위'},
      {key: 'rock',     emj: '✊', label: '바위'},
      {key: 'paper',    emj: '✋', label: '보'}
    ];

    function randItem(){ return ITEMS[Math.floor(Math.random()*ITEMS.length)]; }

    class CardController{
      constructor(cardId, emojiId){
        this.card = document.getElementById(cardId);
        this.emojiEl = document.getElementById(emojiId);
        this.interval = null;
        this.current = null;
        this.running = false;

        this.card.addEventListener('click', ()=> this.toggle());
        this.card.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') this.toggle(); });
      }

      start(){
        if(this.running) return;
        this.running = true;
        this.interval = setInterval(()=>{
          this.current = randItem();
          this.emojiEl.textContent = this.current.emj;
        }, 100);
      }

      stop(){
        if(!this.running) return;
        this.running = false;
        clearInterval(this.interval);
        this.interval = null;
        this.current = randItem();
        this.emojiEl.textContent = this.current.emj;
      }

      toggle(){ this.running ? this.stop() : this.start(); updateResultText(); }

      reset(){
        this.stop();
        this.current = null;
        this.emojiEl.textContent = '❔';
        updateResultText();
      }
    }

    const left = new CardController('left', 'left-emoji');
    const right = new CardController('right', 'right-emoji');

    const resultEl = document.getElementById('result');
    document.getElementById('reset').addEventListener('click', ()=>{ left.reset(); right.reset(); resultEl.textContent = '초기화 완료.' });

    document.getElementById('decide').addEventListener('click', ()=>{
      if(left.running || right.running){ resultEl.textContent = '먼저 두 카드 모두 멈춰야 합니다.'; return; }
      if(!left.current || !right.current){ resultEl.textContent = '두 카드 모두 선택이 완료되어야 합니다.'; return; }
      const winner = judge(left.current.key, right.current.key);
      if(winner === 'draw') resultEl.textContent = `무승부! (${left.current.label} vs ${right.current.label})`;
      else if(winner === 'left') resultEl.textContent = `왼쪽 승리! (${left.current.label} vs ${right.current.label})`;
      else resultEl.textContent = `오른쪽 승리! (${left.current.label} vs ${right.current.label})`;
    });

    function updateResultText(){
      if(left.running || right.running) resultEl.textContent = '터치 중... 멈추면 결과를 확인하세요.';
      else resultEl.textContent = '두 플레이어 모두 멈춘 후 결과를 확인하세요.';
    }

    function judge(a,b){
      if(a===b) return 'draw';
      if((a==='scissors' && b==='paper') || (a==='rock' && b==='scissors') || (a==='paper' && b==='rock')) return 'left';
      return 'right';
    }

    document.body.addEventListener('touchstart', ()=>{}, {passive:true});
    updateResultText();
  </script>
</body>
</html>